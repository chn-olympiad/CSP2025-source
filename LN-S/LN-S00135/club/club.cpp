#include <bits/stdc++.h>
using namespace std;
int t,n,a1[100005],a2[100005],a3[100005],maxp,ma[4]={0,0,0,0},aa1,aa2,aa3,ans;
int main(){
	freopen("club.in","r",stdin);
	freopen("club.out","w",stdout);
	cin>>t;
	while(t--){
		n=0;
		ans=0;
		cin>>n;
		maxp=n/2;
		for(int i=1;i<=n;i++){
			cin>>a1[i]>>a2[i]>>a3[i];
		}
		if(n==2){
			ans=max(ans,a1[1]+a2[2]);
			ans=max(ans,a1[1]+a3[2]);
			ans=max(ans,a2[1]+a1[2]);
			ans=max(ans,a2[1]+a3[2]);
			ans=max(ans,a3[1]+a1[2]);
			ans=max(ans,a3[1]+a2[2]);
		}
		else if(n==3){
			ans=max(ans,a1[1]+a2[2]+a3[3]);
			ans=max(ans,a1[1]+a3[2]+a2[3]);
			ans=max(ans,a2[1]+a1[2]+a3[3]);
			ans=max(ans,a2[1]+a3[2]+a1[3]);
			ans=max(ans,a3[1]+a1[2]+a2[3]);
			ans=max(ans,a3[1]+a2[2]+a1[3]);
		}
		else if(n==4){
			ans=max(ans,a1[1]+a2[2]+a3[3]+a3[4]);
			ans=max(ans,a1[1]+a3[2]+a2[3]+a3[4]);
			ans=max(ans,a2[1]+a1[2]+a3[3]+a3[4]);
			ans=max(ans,a2[1]+a3[2]+a1[3]+a3[4]);
			ans=max(ans,a3[1]+a1[2]+a2[3]+a3[4]);
			ans=max(ans,a3[1]+a2[2]+a1[3]+a3[4]);
			ans=max(ans,a1[1]+a2[2]+a3[3]+a2[4]);
			ans=max(ans,a1[1]+a3[2]+a2[3]+a2[4]);
			ans=max(ans,a2[1]+a1[2]+a3[3]+a2[4]);
			ans=max(ans,a2[1]+a3[2]+a1[3]+a2[4]);
			ans=max(ans,a3[1]+a1[2]+a2[3]+a2[4]);
			ans=max(ans,a3[1]+a2[2]+a1[3]+a2[4]);
			ans=max(ans,a1[1]+a2[2]+a3[3]+a1[4]);
			ans=max(ans,a1[1]+a3[2]+a2[3]+a1[4]);
			ans=max(ans,a2[1]+a1[2]+a3[3]+a1[4]);
			ans=max(ans,a2[1]+a3[2]+a1[3]+a1[4]);
			ans=max(ans,a3[1]+a1[2]+a2[3]+a1[4]);
			ans=max(ans,a3[1]+a2[2]+a1[3]+a1[4]);//fgx
			ans=max(ans,a1[1]+a2[2]+a3[4]+a3[3]);
			ans=max(ans,a1[1]+a3[2]+a2[4]+a3[3]);
			ans=max(ans,a2[1]+a1[2]+a3[4]+a3[3]);
			ans=max(ans,a2[1]+a3[2]+a1[4]+a3[3]);
			ans=max(ans,a3[1]+a1[2]+a2[4]+a3[3]);
			ans=max(ans,a3[1]+a2[2]+a1[4]+a3[3]);
			ans=max(ans,a1[1]+a2[2]+a3[4]+a2[3]);
			ans=max(ans,a1[1]+a3[2]+a2[4]+a2[3]);
			ans=max(ans,a2[1]+a1[2]+a3[4]+a2[3]);
			ans=max(ans,a2[1]+a3[2]+a1[4]+a2[3]);
			ans=max(ans,a3[1]+a1[2]+a2[4]+a2[3]);
			ans=max(ans,a3[1]+a2[2]+a1[4]+a2[3]);
			ans=max(ans,a1[1]+a2[2]+a3[4]+a1[3]);
			ans=max(ans,a1[1]+a3[2]+a2[4]+a1[3]);
			ans=max(ans,a2[1]+a1[2]+a3[4]+a1[3]);
			ans=max(ans,a2[1]+a3[2]+a1[4]+a1[3]);
			ans=max(ans,a3[1]+a1[2]+a2[4]+a1[3]);
			ans=max(ans,a3[1]+a2[2]+a1[4]+a1[3]);//fgx
			ans=max(ans,a1[1]+a2[3]+a3[2]+a3[4]);
			ans=max(ans,a1[1]+a3[3]+a2[2]+a3[4]);
			ans=max(ans,a2[1]+a1[3]+a3[2]+a3[4]);
			ans=max(ans,a2[1]+a3[3]+a1[2]+a3[4]);
			ans=max(ans,a3[1]+a1[3]+a2[2]+a3[4]);
			ans=max(ans,a3[1]+a2[3]+a1[2]+a3[4]);
			ans=max(ans,a1[1]+a2[3]+a3[2]+a2[4]);
			ans=max(ans,a1[1]+a3[3]+a2[2]+a2[4]);
			ans=max(ans,a2[1]+a1[3]+a3[2]+a2[4]);
			ans=max(ans,a2[1]+a3[3]+a1[2]+a2[4]);
			ans=max(ans,a3[1]+a1[3]+a2[2]+a2[4]);
			ans=max(ans,a3[1]+a2[3]+a1[2]+a2[4]);
			ans=max(ans,a1[1]+a2[3]+a3[2]+a1[4]);
			ans=max(ans,a1[1]+a3[3]+a2[2]+a1[4]);
			ans=max(ans,a2[1]+a1[3]+a3[2]+a1[4]);
			ans=max(ans,a2[1]+a3[3]+a1[2]+a1[4]);
			ans=max(ans,a3[1]+a1[3]+a2[2]+a1[4]);
			ans=max(ans,a3[1]+a2[3]+a1[2]+a1[4]);//fgx
			ans=max(ans,a1[1]+a2[3]+a3[4]+a3[2]);
			ans=max(ans,a1[1]+a3[3]+a2[4]+a3[2]);
			ans=max(ans,a2[1]+a1[3]+a3[4]+a3[2]);
			ans=max(ans,a2[1]+a3[3]+a1[4]+a3[2]);
			ans=max(ans,a3[1]+a1[3]+a2[4]+a3[2]);
			ans=max(ans,a3[1]+a2[3]+a1[4]+a3[2]);
			ans=max(ans,a1[1]+a2[3]+a3[4]+a2[2]);
			ans=max(ans,a1[1]+a3[3]+a2[4]+a2[2]);
			ans=max(ans,a2[1]+a1[3]+a3[4]+a2[2]);
			ans=max(ans,a2[1]+a3[3]+a1[4]+a2[2]);
			ans=max(ans,a3[1]+a1[3]+a2[4]+a2[2]);
			ans=max(ans,a3[1]+a2[3]+a1[4]+a2[2]);
			ans=max(ans,a1[1]+a2[3]+a3[4]+a1[2]);
			ans=max(ans,a1[1]+a3[3]+a2[4]+a1[2]);
			ans=max(ans,a2[1]+a1[3]+a3[4]+a1[2]);
			ans=max(ans,a2[1]+a3[3]+a1[4]+a1[2]);
			ans=max(ans,a3[1]+a1[3]+a2[4]+a1[2]);
			ans=max(ans,a3[1]+a2[3]+a1[4]+a1[2]);//fgx
			ans=max(ans,a1[1]+a2[4]+a3[2]+a3[3]);
			ans=max(ans,a1[1]+a3[4]+a2[2]+a3[3]);
			ans=max(ans,a2[1]+a1[4]+a3[2]+a3[3]);
			ans=max(ans,a2[1]+a3[4]+a1[2]+a3[3]);
			ans=max(ans,a3[1]+a1[4]+a2[2]+a3[3]);
			ans=max(ans,a3[1]+a2[4]+a1[2]+a3[3]);
			ans=max(ans,a1[1]+a2[4]+a3[2]+a2[3]);
			ans=max(ans,a1[1]+a3[4]+a2[2]+a2[3]);
			ans=max(ans,a2[1]+a1[4]+a3[2]+a2[3]);
			ans=max(ans,a2[1]+a3[4]+a1[2]+a2[3]);
			ans=max(ans,a3[1]+a1[4]+a2[2]+a2[3]);
			ans=max(ans,a3[1]+a2[4]+a1[2]+a2[3]);
			ans=max(ans,a1[1]+a2[4]+a3[2]+a1[3]);
			ans=max(ans,a1[1]+a3[4]+a2[2]+a1[3]);
			ans=max(ans,a2[1]+a1[4]+a3[2]+a1[3]);
			ans=max(ans,a2[1]+a3[4]+a1[2]+a1[3]);
			ans=max(ans,a3[1]+a1[4]+a2[2]+a1[3]);
			ans=max(ans,a3[1]+a2[4]+a1[2]+a1[3]);//fgx
			ans=max(ans,a1[1]+a2[4]+a3[3]+a3[2]);
			ans=max(ans,a1[1]+a3[4]+a2[3]+a3[2]);
			ans=max(ans,a2[1]+a1[4]+a3[3]+a3[2]);
			ans=max(ans,a2[1]+a3[4]+a1[3]+a3[2]);
			ans=max(ans,a3[1]+a1[4]+a2[3]+a3[2]);
			ans=max(ans,a3[1]+a2[4]+a1[3]+a3[2]);
			ans=max(ans,a1[1]+a2[4]+a3[3]+a2[2]);
			ans=max(ans,a1[1]+a3[4]+a2[3]+a2[2]);
			ans=max(ans,a2[1]+a1[4]+a3[3]+a2[2]);
			ans=max(ans,a2[1]+a3[4]+a1[3]+a2[2]);
			ans=max(ans,a3[1]+a1[4]+a2[3]+a2[2]);
			ans=max(ans,a3[1]+a2[4]+a1[3]+a2[2]);
			ans=max(ans,a1[1]+a2[4]+a3[3]+a1[2]);
			ans=max(ans,a1[1]+a3[4]+a2[3]+a1[2]);
			ans=max(ans,a2[1]+a1[4]+a3[3]+a1[2]);
			ans=max(ans,a2[1]+a3[4]+a1[3]+a1[2]);
			ans=max(ans,a3[1]+a1[4]+a2[3]+a1[2]);
			ans=max(ans,a3[1]+a2[4]+a1[3]+a1[2]);//fgxfgx
			ans=max(ans,a1[2]+a2[1]+a3[3]+a3[4]);
			ans=max(ans,a1[2]+a3[1]+a2[3]+a3[4]);
			ans=max(ans,a2[2]+a1[1]+a3[3]+a3[4]);
			ans=max(ans,a2[2]+a3[1]+a1[3]+a3[4]);
			ans=max(ans,a3[2]+a1[1]+a2[3]+a3[4]);
			ans=max(ans,a3[2]+a2[1]+a1[3]+a3[4]);
			ans=max(ans,a1[2]+a2[1]+a3[3]+a2[4]);
			ans=max(ans,a1[2]+a3[1]+a2[3]+a2[4]);
			ans=max(ans,a2[2]+a1[1]+a3[3]+a2[4]);
			ans=max(ans,a2[2]+a3[1]+a1[3]+a2[4]);
			ans=max(ans,a3[2]+a1[2]+a2[3]+a2[4]);
			ans=max(ans,a3[2]+a2[1]+a1[3]+a2[4]);
			ans=max(ans,a1[2]+a2[1]+a3[3]+a1[4]);
			ans=max(ans,a1[2]+a3[1]+a2[3]+a1[4]);
			ans=max(ans,a2[2]+a1[1]+a3[3]+a1[4]);
			ans=max(ans,a2[2]+a3[1]+a1[3]+a1[4]);
			ans=max(ans,a3[2]+a1[1]+a2[3]+a1[4]);
			ans=max(ans,a3[2]+a2[1]+a1[3]+a1[4]);//fgx
			ans=max(ans,a1[2]+a2[1]+a3[4]+a3[3]);
			ans=max(ans,a1[2]+a3[1]+a2[4]+a3[3]);
			ans=max(ans,a2[2]+a1[1]+a3[4]+a3[3]);
			ans=max(ans,a2[2]+a3[1]+a1[4]+a3[3]);
			ans=max(ans,a3[2]+a1[1]+a2[4]+a3[3]);
			ans=max(ans,a3[2]+a2[1]+a1[4]+a3[3]);
			ans=max(ans,a1[2]+a2[1]+a3[4]+a2[3]);
			ans=max(ans,a1[2]+a3[1]+a2[4]+a2[3]);
			ans=max(ans,a2[2]+a1[1]+a3[4]+a2[3]);
			ans=max(ans,a2[2]+a3[1]+a1[4]+a2[3]);
			ans=max(ans,a3[2]+a1[1]+a2[4]+a2[3]);
			ans=max(ans,a3[2]+a2[1]+a1[4]+a2[3]);
			ans=max(ans,a1[2]+a2[1]+a3[4]+a1[3]);
			ans=max(ans,a1[2]+a3[1]+a2[4]+a1[3]);
			ans=max(ans,a2[2]+a1[1]+a3[4]+a1[3]);
			ans=max(ans,a2[2]+a3[1]+a1[4]+a1[3]);
			ans=max(ans,a3[2]+a1[1]+a2[4]+a1[3]);
			ans=max(ans,a3[2]+a2[1]+a1[4]+a1[3]);//fgx
			ans=max(ans,a1[2]+a2[3]+a3[1]+a3[4]);
			ans=max(ans,a1[2]+a3[3]+a2[1]+a3[4]);
			ans=max(ans,a2[2]+a1[3]+a3[1]+a3[4]);
			ans=max(ans,a2[2]+a3[3]+a1[1]+a3[4]);
			ans=max(ans,a3[2]+a1[3]+a2[1]+a3[4]);
			ans=max(ans,a3[2]+a2[3]+a1[1]+a3[4]);
			ans=max(ans,a1[2]+a2[3]+a3[1]+a2[4]);
			ans=max(ans,a1[2]+a3[3]+a2[1]+a2[4]);
			ans=max(ans,a2[2]+a1[3]+a3[1]+a2[4]);
			ans=max(ans,a2[2]+a3[3]+a1[1]+a2[4]);
			ans=max(ans,a3[2]+a1[3]+a2[1]+a2[4]);
			ans=max(ans,a3[2]+a2[3]+a1[1]+a2[4]);
			ans=max(ans,a1[2]+a2[3]+a3[1]+a1[4]);
			ans=max(ans,a1[2]+a3[3]+a2[1]+a1[4]);
			ans=max(ans,a2[2]+a1[3]+a3[1]+a1[4]);
			ans=max(ans,a2[2]+a3[3]+a1[1]+a1[4]);
			ans=max(ans,a3[2]+a1[3]+a2[1]+a1[4]);
			ans=max(ans,a3[2]+a2[3]+a1[1]+a1[4]);//fgx
			ans=max(ans,a1[2]+a2[3]+a3[4]+a3[1]);
			ans=max(ans,a1[2]+a3[3]+a2[4]+a3[1]);
			ans=max(ans,a2[2]+a1[3]+a3[4]+a3[1]);
			ans=max(ans,a2[2]+a3[3]+a1[4]+a3[1]);
			ans=max(ans,a3[2]+a1[3]+a2[4]+a3[1]);
			ans=max(ans,a3[2]+a2[3]+a1[4]+a3[1]);
			ans=max(ans,a1[2]+a2[3]+a3[4]+a2[1]);
			ans=max(ans,a1[2]+a3[3]+a2[4]+a2[1]);
			ans=max(ans,a2[2]+a1[3]+a3[4]+a2[1]);
			ans=max(ans,a2[2]+a3[3]+a1[4]+a2[1]);
			ans=max(ans,a3[2]+a1[3]+a2[4]+a2[1]);
			ans=max(ans,a3[2]+a2[3]+a1[4]+a2[1]);
			ans=max(ans,a1[2]+a2[3]+a3[4]+a1[1]);
			ans=max(ans,a1[2]+a3[3]+a2[4]+a1[1]);
			ans=max(ans,a2[2]+a1[3]+a3[4]+a1[1]);
			ans=max(ans,a2[2]+a3[3]+a1[4]+a1[1]);
			ans=max(ans,a3[2]+a1[3]+a2[4]+a1[1]);
			ans=max(ans,a3[2]+a2[3]+a1[4]+a1[1]);//fgx
			ans=max(ans,a1[2]+a2[4]+a3[1]+a3[3]);
			ans=max(ans,a1[2]+a3[4]+a2[1]+a3[3]);
			ans=max(ans,a2[2]+a1[4]+a3[1]+a3[3]);
			ans=max(ans,a2[2]+a3[4]+a1[1]+a3[3]);
			ans=max(ans,a3[2]+a1[4]+a2[1]+a3[3]);
			ans=max(ans,a3[2]+a2[4]+a1[1]+a3[3]);
			ans=max(ans,a1[2]+a2[4]+a3[1]+a2[3]);
			ans=max(ans,a1[2]+a3[4]+a2[1]+a2[3]);
			ans=max(ans,a2[2]+a1[4]+a3[1]+a2[3]);
			ans=max(ans,a2[2]+a3[4]+a1[1]+a2[3]);
			ans=max(ans,a3[2]+a1[4]+a2[1]+a2[3]);
			ans=max(ans,a3[2]+a2[4]+a1[1]+a2[3]);
			ans=max(ans,a1[2]+a2[4]+a3[1]+a1[3]);
			ans=max(ans,a1[2]+a3[4]+a2[1]+a1[3]);
			ans=max(ans,a2[2]+a1[4]+a3[1]+a1[3]);
			ans=max(ans,a2[2]+a3[4]+a1[1]+a1[3]);
			ans=max(ans,a3[2]+a1[4]+a2[1]+a1[3]);
			ans=max(ans,a3[2]+a2[4]+a1[1]+a1[3]);//fgx
			ans=max(ans,a1[2]+a2[4]+a3[3]+a3[1]);
			ans=max(ans,a1[2]+a3[4]+a2[3]+a3[1]);
			ans=max(ans,a2[2]+a1[4]+a3[3]+a3[1]);
			ans=max(ans,a2[2]+a3[4]+a1[3]+a3[1]);
			ans=max(ans,a3[2]+a1[4]+a2[3]+a3[1]);
			ans=max(ans,a3[2]+a2[4]+a1[3]+a3[1]);
			ans=max(ans,a1[2]+a2[4]+a3[3]+a2[1]);
			ans=max(ans,a1[2]+a3[4]+a2[3]+a2[1]);
			ans=max(ans,a2[2]+a1[4]+a3[3]+a2[1]);
			ans=max(ans,a2[2]+a3[4]+a1[3]+a2[1]);
			ans=max(ans,a3[2]+a1[4]+a2[3]+a2[1]);
			ans=max(ans,a3[2]+a2[4]+a1[3]+a2[1]);
			ans=max(ans,a1[2]+a2[4]+a3[3]+a1[1]);
			ans=max(ans,a1[2]+a3[4]+a2[3]+a1[1]);
			ans=max(ans,a2[2]+a1[4]+a3[3]+a1[1]);
			ans=max(ans,a2[2]+a3[4]+a1[3]+a1[1]);
			ans=max(ans,a3[2]+a1[4]+a2[3]+a1[1]);
			ans=max(ans,a3[2]+a2[4]+a1[3]+a1[1]);//fgxfgx
		}
		cout<<ans<<endl;
	}
	return 0;
}
