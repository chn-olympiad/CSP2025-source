#include<bits/stdc++.h>
using namespace std;
int t,n,a[1010][3],ans,sum,b[1010][3],s,maxn[1010],maxn1=0;
int main(){
freopen("club.in","r",stdin);
freopen("club.out","w",stdout);
cin>>t;
for(int i=1;i<=t;i++){
	ans=0,sum=0,maxn1=0,s=0;
	cin>>n;
	for(int j=1;j<=n;j++){
		for(int q=1;q<=3;q++){
			cin>>a[j][q];
			b[j][q]=a[j][q];
		}
	}

	for(int j=1;j<=n;j++){
		if(a[j][2]==0){
			if(a[j][3]==0){
				sum++;				
			}
		}
	}
	if(sum==n){
		for(int w=1;w<=n;w++){
			for(int j=1;j<=n;j++){
				if(b[j][1]<b[j+1][1]){
					s=b[j][1];
					b[j][1]=b[j+1][1];
					b[j+1][1]=s;
				}		
			}	
		}
		for(int j=1;j<=n/2;j++){
			ans+=b[j][1];
		}
		cout<<ans<<endl;	
		continue;
	}
	if(n==2){
		maxn[1]=a[1][1]+a[2][2];
		maxn[2]=a[1][1]+a[2][3];
		maxn[3]=a[1][2]+a[2][1];
		maxn[4]=a[1][2]+a[2][3];
		maxn[5]=a[1][3]+a[2][2];
		maxn[6]=a[1][3]+a[2][1];	
		for(int j=1;j<=6;j++){
			if(maxn[j]>maxn1){
				maxn1=maxn[j];
			}
		}
		cout<<maxn1<<endl;	
		continue;
	}
	if(n==4){
		maxn[1]=a[1][1]+a[2][1]+a[3][2]+a[4][2];
		maxn[2]=a[1][1]+a[2][1]+a[3][3]+a[4][3];
		maxn[3]=a[1][1]+a[2][1]+a[3][2]+a[4][3];
		maxn[4]=a[1][1]+a[2][1]+a[3][3]+a[4][2];
		maxn[5]=a[1][1]+a[2][2]+a[3][1]+a[4][2];
		maxn[6]=a[1][1]+a[2][2]+a[3][1]+a[4][3];
		maxn[7]=a[1][1]+a[2][2]+a[3][3]+a[4][3];
		maxn[8]=a[1][1]+a[2][2]+a[3][3]+a[4][2];
		maxn[9]=a[1][1]+a[2][2]+a[3][2]+a[4][1];
		maxn[10]=a[1][1]+a[2][2]+a[3][2]+a[4][3];
		maxn[11]=a[1][1]+a[2][2]+a[3][3]+a[4][1];
		maxn[12]=a[1][1]+a[2][3]+a[3][1]+a[4][2];
		maxn[13]=a[1][1]+a[2][3]+a[3][1]+a[4][3];
		maxn[14]=a[1][1]+a[2][3]+a[3][2]+a[4][1];
		maxn[15]=a[1][1]+a[2][3]+a[3][2]+a[4][2];
		maxn[16]=a[1][1]+a[2][3]+a[3][2]+a[4][3];
		maxn[17]=a[1][1]+a[2][3]+a[3][3]+a[4][1];
		maxn[18]=a[1][1]+a[2][3]+a[3][3]+a[4][2];
		maxn[19]=a[1][2]+a[2][1]+a[3][2]+a[4][1];
		maxn[20]=a[1][2]+a[2][1]+a[3][2]+a[4][3];
		maxn[21]=a[1][2]+a[2][1]+a[3][1]+a[4][2];
		maxn[22]=a[1][2]+a[2][1]+a[3][1]+a[4][3];
		maxn[23]=a[1][2]+a[2][1]+a[3][3]+a[4][1];
		maxn[24]=a[1][2]+a[2][1]+a[3][3]+a[4][2];
		maxn[25]=a[1][2]+a[2][1]+a[3][3]+a[4][3];
		maxn[26]=a[1][2]+a[2][2]+a[3][1]+a[4][1];
		maxn[27]=a[1][2]+a[2][2]+a[3][1]+a[4][3];
		maxn[28]=a[1][2]+a[2][2]+a[3][3]+a[4][1];
		maxn[29]=a[1][2]+a[2][2]+a[3][3]+a[4][3];
		maxn[30]=a[1][2]+a[2][3]+a[3][1]+a[4][1];
		maxn[31]=a[1][2]+a[2][3]+a[3][1]+a[4][2];
		maxn[32]=a[1][2]+a[2][3]+a[3][1]+a[4][3];
		maxn[33]=a[1][2]+a[2][3]+a[3][2]+a[4][1];
		maxn[34]=a[1][2]+a[2][3]+a[3][2]+a[4][3];
		maxn[35]=a[1][2]+a[2][3]+a[3][3]+a[4][1];
		maxn[36]=a[1][2]+a[2][3]+a[3][3]+a[4][2];
		maxn[37]=a[1][3]+a[2][1]+a[3][1]+a[4][2];
		maxn[38]=a[1][3]+a[2][1]+a[3][1]+a[4][3];
		maxn[39]=a[1][3]+a[2][1]+a[3][2]+a[4][1];
		maxn[40]=a[1][3]+a[2][1]+a[3][2]+a[4][2];
		maxn[41]=a[1][3]+a[2][1]+a[3][2]+a[4][3];
		maxn[42]=a[1][3]+a[2][1]+a[3][3]+a[4][1];
		maxn[43]=a[1][3]+a[2][1]+a[3][3]+a[4][2];
		maxn[44]=a[1][3]+a[2][2]+a[3][1]+a[4][1];
		maxn[45]=a[1][3]+a[2][2]+a[3][1]+a[4][2];
		maxn[46]=a[1][3]+a[2][2]+a[3][1]+a[4][3];
		maxn[47]=a[1][3]+a[2][2]+a[3][2]+a[4][1];
		maxn[48]=a[1][3]+a[2][2]+a[3][2]+a[4][3];
		maxn[49]=a[1][3]+a[2][2]+a[3][3]+a[4][1];
		maxn[50]=a[1][3]+a[2][2]+a[3][3]+a[4][2];
		maxn[51]=a[1][3]+a[2][3]+a[3][1]+a[4][1];
		maxn[52]=a[1][3]+a[2][3]+a[3][1]+a[4][2];
		maxn[53]=a[1][3]+a[2][3]+a[3][2]+a[4][1];
		maxn[54]=a[1][3]+a[2][3]+a[3][2]+a[4][2];
		for(int j=1;j<=54;j++){
			if(maxn[j]>maxn1){
				maxn1=maxn[j];
			}
		}
		cout<<maxn1<<endl;
		continue;
	}	
}
return 0;	
} 
