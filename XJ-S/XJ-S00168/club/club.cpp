#include<bits/stdc++.h>
using namespace std;
int t,n,a[100010][5],b[100010][5],e[100010][5],c[5],d[10][3];
int main(){
	freopen("club.in","r",stdin);
	freopen("club.out","w",stdout);
	cin>>t;
	for(int z=1;z<=t;z++){
		cin>>n;
		c[1]=0;
		c[2]=0;
		c[3]=0;
		for(int i=1;i<=n;i++){
			cin>>a[i][1]>>a[i][2]>>a[i][3];
//			b[i]=a[i][1];
			if(a[i][1]>a[i][2]){
				if(a[i][1]>a[i][3]){
					b[i][1]=a[i][1];
					e[i][1]=1;
					if(a[i][2]>a[i][3]){
						b[i][2]=a[i][2];
						e[i][2]=2;
						b[i][3]=a[i][3];
						e[i][3]=3;
					}else{
						b[i][2]=a[i][3];
						e[i][2]=3;
						b[i][3]=a[i][2];
						e[i][3]=2;
					}
				}else{
					b[i][1]=a[i][3];
					e[i][1]=3;
					b[i][2]=a[i][1];
					e[i][2]=1;
					b[i][3]=a[i][2];
					e[i][3]=2;
				}
			}else{
				if(a[i][2]>a[i][3]){
					b[i][1]=a[i][2];
					e[i][1]=2;
					if(a[i][1]>a[i][3]){
						b[i][2]=a[i][1];
						e[i][2]=1;
						b[i][3]=a[i][3];
						e[i][3]=3;
					}else{
						b[i][2]=a[i][3];
						e[i][2]=3;
						b[i][3]=a[i][1];
						e[i][3]=1;
					}
				}else{
					b[i][1]=a[i][3];
					e[i][1]=3;
					b[i][2]=a[i][2];
					e[i][2]=2;
					b[i][3]=a[i][1];
					e[i][3]=1;
				}
			}
		}
		for(int j=1;j<=n;j++){
			for(int i=1;i<n;i++){
				int t;
				if(b[i][1]<b[i+1][1]){
					t=e[i][1];
					e[i][1]=e[i+1][1];
					e[i+1][1]=t;
					t=e[i][2];
					e[i][2]=e[i+1][2];
					e[i+1][2]=t;
					t=e[i][3];
					e[i][3]=e[i+1][3];
					e[i+1][3]=t;
					t=b[i][1];
					b[i][1]=b[i+1][1];
					b[i+1][1]=t;
					t=a[i][1];
					a[i][1]=a[i+1][1];
					a[i+1][1]=t;
					t=a[i][2];
					a[i][2]=a[i+1][2];
					a[i+1][2]=t;
					t=a[i][3];
					a[i][3]=a[i+1][3];
					a[i+1][3]=t;
				}
			}
		}
		for(int i=1;i<=n;i++){
			int o=n/2;
			if(c[e[i][1]]<o){
				c[e[i][1]]++;
				d[z][1]+=b[i][1];
			}else {
				d[z][1]+=b[i][2];
			}
		}
		c[1]=0;
		c[2]=0;
		c[3]=0;
	//	cout<<c[1]<<" "<<c[2]<<" "<<c[3]<<endl;
		d[z][2]+=b[1][2];
		c[2]++;                 
		for(int i=2;i<=n;i++){
			int o=n/2;
			if(c[e[i][1]]<o){
				c[e[i][1]]++;
				d[z][2]+=b[i][1];
			}else {
				d[z][2]+=b[i][2];
			}
		}
		d[z][1]=max(d[z][1],d[z][2]);
	}
	for(int i=1;i<=t;i++){
//		for(int j=1;j<=n;j++){<<" "<<d[i][2]
//			cout<<a[j][1]<<" "<<a[j][2]<<" "<<a[j][3]<<" "<<b[j][1]<<" "<<b[j][2]<<" "<<b[j][3]<<" "<<e[j][1]<<" "<<e[j][2]<<" "<<e[j][3]<<endl;
//		}
		cout<<d[i][1]<<endl;
	}
	
	return 0;
} 
////1
// 4
// 4 2 1
// 3 2 4
// 5 3 4
// 3 5 1
////1
// 4
// 0 1 0
// 0 1 0
// 0 2 0
// 0 2 0
//1
//2
//10 9 8
//4 0 0
////5
//10
//2020 14533 18961
//2423 15344 16322
//1910 6224 16178
//2038 9963 19722
//8375 10557 5444
//3518 14615 17976
//6188 13424 16615
//8769 509 4394
//958 3195 9953
//16441 5313 10926
//10
//5491 4476 6362
//9805 9130 15480
//9090 9901 10480
//6326 6516 1985
//9119 2924 6420
//9826 12689 7592
//7293 16544 12901
//11905 18183 18712
//9015 3463 13025
//1792 2433 17042
//10
//3004 4255 17336
//11894 5756 17092
//8150 14715 10991
//5149 16652 16780
//11524 11996 5433
//7690 10472 19935
//1184 6516 9246
//3231 5570 10010
//8426 16992 4654
//18955 13977 16657
//10
//6839 5455 15586
//11767 12919 2643
//13775 8904 19938
//13717 11997 15170
//13707 2404 17497
//3471 2462 8073
//18467 14346 18663
//13582 4839 15785
//11875 7476 12308
//8568 3134 18522
//10
//14230 3941 18854
//12173 19429 15426
//10974 4717 15290
//4732 6608 4961
//13198 13925 2137
//10688 3092 16965
//5356 19920 1471
//11299 10796 13511
//17932 12143 16407
//5611 8100 16107 
