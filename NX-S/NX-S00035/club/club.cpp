#include<bits/stdc++.h>
using namespace std;
int rs[10002][10002];
int ys[10001];
int re1[10];
int re2[10002];
int main()
{
    freopen("club.in","r",stdin);
    freopen("club.out","w",stdout);

    int t,n,a=1;
    cin>>t;
    while(t--)
    {
        long long max1,max2,max3,max4,max5,max6,max7,max8,max9,max10,max11,max12,max13,max14,max15,max16,max17,max18,max19,max20,max21,max22,max23,max24,max25,max26,max27;
        int re;
        cin>>n;
        if(n==2)
        {
            //re=0;
            for(int i=1;i<=n;i++)
            {
                cin>>rs[i][1]>>rs[i][2]>>rs[i][3];
            }
            max1=max(rs[1][1]+rs[2][2],rs[1][1]+rs[2][3]);
            max2=max(rs[1][2]+rs[2][1],rs[1][2]+rs[2][3]);
            max3=max(rs[1][3]+rs[2][1],rs[1][1]+rs[2][2]);
            re1[a]=max(max(max1,max2),max3);
            a++;

        }
        else if(n==4)
        {
            //re=0;
            for(int i=1;i<=n;i++)
            {
                cin>>rs[i][1]>>rs[i][2]>>rs[i][3];
            }
            ys[1]=rs[1][1]+rs[2][1]+rs[3][2]+rs[4][2];
            ys[2]=rs[1][1]+rs[2][1]+rs[3][2]+rs[4][3];
            ys[3]=rs[1][1]+rs[2][1]+rs[3][3]+rs[4][2];
            ys[4]=rs[1][1]+rs[2][1]+rs[3][3]+rs[4][3];
            ys[5]=rs[1][1]+rs[2][2]+rs[3][1]+rs[4][2];
            ys[6]=rs[1][1]+rs[2][2]+rs[3][2]+rs[4][3];
            ys[7]=rs[1][1]+rs[2][2]+rs[3][2]+rs[4][1];
            ys[8]=rs[1][1]+rs[2][2]+rs[3][2]+rs[4][3];
            ys[9]=rs[1][1]+rs[2][2]+rs[3][3]+rs[4][1];
            ys[10]=rs[1][1]+rs[2][2]+rs[3][3]+rs[4][2];
            ys[11]=rs[1][1]+rs[2][2]+rs[3][3]+rs[4][3];
            ys[12]=rs[1][1]+rs[2][3]+rs[3][1]+rs[4][2];
            ys[13]=rs[1][1]+rs[2][3]+rs[3][1]+rs[4][3];
            ys[14]=rs[1][1]+rs[2][3]+rs[3][2]+rs[4][1];
            ys[15]=rs[1][1]+rs[2][3]+rs[3][2]+rs[4][2];
            ys[16]=rs[1][1]+rs[2][3]+rs[3][2]+rs[4][3];
            ys[17]=rs[1][1]+rs[2][3]+rs[3][3]+rs[4][1];
            ys[18]=rs[1][1]+rs[2][3]+rs[3][3]+rs[4][2];
            ys[19]=rs[1][2]+rs[2][1]+rs[3][1]+rs[4][2];
            ys[20]=rs[1][2]+rs[2][1]+rs[3][1]+rs[4][3];
            ys[21]=rs[1][2]+rs[2][1]+rs[3][2]+rs[4][1];
            ys[22]=rs[1][2]+rs[2][1]+rs[3][2]+rs[4][3];
            ys[23]=rs[1][2]+rs[2][1]+rs[3][3]+rs[4][1];
            ys[24]=rs[1][2]+rs[2][1]+rs[3][3]+rs[4][2];
            ys[25]=rs[1][2]+rs[2][1]+rs[3][3]+rs[4][3];
            ys[26]=rs[1][2]+rs[2][2]+rs[3][1]+rs[4][1];
            ys[27]=rs[1][2]+rs[2][2]+rs[3][1]+rs[4][3];
            ys[28]=rs[1][2]+rs[2][2]+rs[3][3]+rs[4][1];
            ys[29]=rs[1][2]+rs[2][2]+rs[3][3]+rs[4][3];
            ys[30]=rs[1][2]+rs[2][3]+rs[3][1]+rs[4][1];
            ys[31]=rs[1][2]+rs[2][3]+rs[3][1]+rs[4][2];
            ys[32]=rs[1][2]+rs[2][3]+rs[3][1]+rs[4][3];
            ys[33]=rs[1][2]+rs[2][3]+rs[3][2]+rs[4][1];
            ys[34]=rs[1][2]+rs[2][3]+rs[3][2]+rs[4][3];
            ys[35]=rs[1][2]+rs[2][3]+rs[3][3]+rs[4][1];
            ys[36]=rs[1][2]+rs[2][3]+rs[3][3]+rs[4][2];
            ys[37]=rs[1][3]+rs[2][1]+rs[3][1]+rs[4][2];
            ys[38]=rs[1][3]+rs[2][1]+rs[3][1]+rs[4][3];
            ys[39]=rs[1][3]+rs[2][1]+rs[3][2]+rs[4][1];
            ys[40]=rs[1][3]+rs[2][1]+rs[3][2]+rs[4][2];
            ys[41]=rs[1][3]+rs[2][1]+rs[3][2]+rs[4][3];
            ys[42]=rs[1][3]+rs[2][1]+rs[3][3]+rs[4][1];
            ys[43]=rs[1][3]+rs[2][1]+rs[3][3]+rs[4][2];
            ys[44]=rs[1][3]+rs[2][2]+rs[3][1]+rs[4][1];
            ys[45]=rs[1][3]+rs[2][2]+rs[3][1]+rs[4][2];
            ys[46]=rs[1][3]+rs[2][2]+rs[3][1]+rs[4][3];
            ys[47]=rs[1][3]+rs[2][2]+rs[3][2]+rs[4][1];
            ys[48]=rs[1][3]+rs[2][2]+rs[3][2]+rs[4][3];
            ys[49]=rs[1][3]+rs[2][2]+rs[3][3]+rs[4][1];
            ys[50]=rs[1][3]+rs[2][2]+rs[3][3]+rs[4][2];
            ys[51]=rs[1][3]+rs[2][3]+rs[3][1]+rs[4][1];
            ys[52]=rs[1][3]+rs[2][3]+rs[3][1]+rs[4][2];
            ys[53]=rs[1][3]+rs[2][3]+rs[3][2]+rs[4][1];
            ys[54]=rs[1][3]+rs[2][3]+rs[3][2]+rs[4][2];
            sort(ys+1,ys+1+54);
            re1[a]=ys[54];
            a++;
        }

    }
    for(int i=1;i<a;i++)
    {
        cout<<re1[i]<<endl;
    }
    return 0;
}
