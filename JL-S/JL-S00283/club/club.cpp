#include<bits/stdc++.h>
//10 or 15pts(special test no.12 and test no.1)or(with test no.2)  
const int maxn=1e6;
int a[2][maxn+5];
int p[maxn+5];
using namespace std;
bool cmp(int a,int b)
{
	if(a>b) return true;
	else return false;
}
int main()
{
	freopen("club.in","r",stdin);
	freopen("club.out","w",stdout);
	int t;
	cin>>t;
	while(t--)
	{
		int n,sum=0;
		cin>>n;
		for(int i=0;i<n;i++){
			for(int j=0;j<3;j++) cin>>a[i][j];}
		if(n==2)//5pts for test no.1
		{
			p[0]=a[0][0]+a[1][1];
			p[1]=a[0][0]+a[1][2];
			p[2]=a[0][1]+a[1][0];
			p[3]=a[0][1]+a[1][2];
			p[4]=a[0][2]+a[1][0];
			p[5]=a[0][2]+a[1][1];
			sort(p,p+9,cmp);
			cout<<p[0]<<endl;
	}
		else if(n==4)//5pts for test no.2(luckliy)
		{
p[0]=a[0][0]+a[1][0]+a[2][1]+a[3][1];// i can not use the DFS to make them
p[0]=a[0][1]+a[1][2]+a[2][1]+a[3][2];
p[0]=a[0][0]+a[1][0]+a[2][1]+a[3][2];
p[0]=a[0][0]+a[1][0]+a[2][1]+a[3][3];
p[0]=a[0][0]+a[1][0]+a[2][2]+a[3][1];
p[0]=a[0][0]+a[1][0]+a[2][2]+a[3][2];
p[0]=a[0][0]+a[1][0]+a[2][2]+a[3][3];
p[0]=a[0][0]+a[1][0]+a[2][3]+a[3][1];
p[0]=a[0][0]+a[1][0]+a[2][3]+a[3][2];
p[0]=a[0][0]+a[1][0]+a[2][3]+a[3][3];//00
p[0]=a[0][0]+a[1][1]+a[2][1]+a[3][0];
p[0]=a[0][0]+a[1][1]+a[2][1]+a[3][2];
p[0]=a[0][0]+a[1][1]+a[2][1]+a[3][3];
p[0]=a[0][0]+a[1][1]+a[2][2]+a[3][0];
p[0]=a[0][0]+a[1][1]+a[2][2]+a[3][1];
p[0]=a[0][0]+a[1][1]+a[2][2]+a[3][3];
p[0]=a[0][0]+a[1][1]+a[2][3]+a[3][1];
p[0]=a[0][0]+a[1][1]+a[2][3]+a[3][0];
p[0]=a[0][0]+a[1][1]+a[2][3]+a[3][2];
p[0]=a[0][0]+a[1][1]+a[2][0]+a[3][1];
p[0]=a[0][0]+a[1][1]+a[2][0]+a[3][2];
p[0]=a[0][0]+a[1][1]+a[2][0]+a[3][3];//01
p[0]=a[0][0]+a[1][2]+a[2][0]+a[3][1];
p[0]=a[0][0]+a[1][2]+a[2][0]+a[3][2];
p[0]=a[0][0]+a[1][2]+a[2][0]+a[3][3];
p[0]=a[0][0]+a[1][2]+a[2][1]+a[3][0];
p[0]=a[0][0]+a[1][2]+a[2][1]+a[3][1];
p[0]=a[0][0]+a[1][2]+a[2][1]+a[3][2];
p[0]=a[0][0]+a[1][2]+a[2][1]+a[3][3];
p[0]=a[0][0]+a[1][2]+a[2][2]+a[3][0];
p[0]=a[0][0]+a[1][2]+a[2][2]+a[3][1];
p[0]=a[0][0]+a[1][2]+a[2][2]+a[3][3];
p[0]=a[0][0]+a[1][2]+a[2][3]+a[3][0];
p[0]=a[0][0]+a[1][2]+a[2][3]+a[3][1];
p[0]=a[0][0]+a[1][2]+a[2][3]+a[3][2];
p[0]=a[0][0]+a[1][2]+a[2][3]+a[3][3];//02
p[0]=a[0][0]+a[1][3]+a[2][0]+a[3][1];
p[0]=a[0][0]+a[1][3]+a[2][0]+a[3][2];
p[0]=a[0][0]+a[1][3]+a[2][0]+a[3][3];
p[0]=a[0][0]+a[1][3]+a[2][1]+a[3][0];
p[0]=a[0][0]+a[1][3]+a[2][1]+a[3][1];
p[0]=a[0][0]+a[1][3]+a[2][1]+a[3][2];
p[0]=a[0][0]+a[1][3]+a[2][1]+a[3][3];
p[0]=a[0][0]+a[1][3]+a[2][2]+a[3][0];
p[0]=a[0][0]+a[1][3]+a[2][2]+a[3][1];
p[0]=a[0][0]+a[1][3]+a[2][2]+a[3][2];
p[0]=a[0][0]+a[1][3]+a[2][2]+a[3][3];
p[0]=a[0][0]+a[1][3]+a[2][3]+a[3][0];
p[0]=a[0][0]+a[1][3]+a[2][3]+a[3][1];
p[0]=a[0][0]+a[1][3]+a[2][3]+a[3][2];//03
p[0]=a[0][1]+a[1][0]+a[2][0]+a[3][1];
p[0]=a[0][1]+a[1][0]+a[2][0]+a[3][2];
p[0]=a[0][1]+a[1][0]+a[2][0]+a[3][3];
p[0]=a[0][1]+a[1][0]+a[2][1]+a[3][0];
p[0]=a[0][1]+a[1][0]+a[2][1]+a[3][2];
p[0]=a[0][1]+a[1][0]+a[2][1]+a[3][3];
p[0]=a[0][1]+a[1][0]+a[2][2]+a[3][1];
p[0]=a[0][1]+a[1][0]+a[2][2]+a[3][2];
p[0]=a[0][1]+a[1][0]+a[2][2]+a[3][3];
p[0]=a[0][1]+a[1][0]+a[2][3]+a[3][0];
p[0]=a[0][1]+a[1][0]+a[2][3]+a[3][1];
p[0]=a[0][1]+a[1][0]+a[2][3]+a[3][2];
p[0]=a[0][1]+a[1][0]+a[2][3]+a[3][3];//10
p[0]=a[0][1]+a[1][1]+a[2][0]+a[3][0];
p[0]=a[0][1]+a[1][1]+a[2][0]+a[3][2];
p[0]=a[0][1]+a[1][1]+a[2][0]+a[3][3];
p[0]=a[0][1]+a[1][1]+a[2][2]+a[3][0];
p[0]=a[0][1]+a[1][1]+a[2][2]+a[3][2];
p[0]=a[0][1]+a[1][1]+a[2][2]+a[3][3];
p[0]=a[0][1]+a[1][1]+a[2][3]+a[3][0];
p[0]=a[0][1]+a[1][1]+a[2][3]+a[3][2];
p[0]=a[0][1]+a[1][1]+a[2][3]+a[3][3];//11
p[0]=a[0][1]+a[1][2]+a[2][0]+a[3][0];
p[0]=a[0][1]+a[1][2]+a[2][0]+a[3][1];
p[0]=a[0][1]+a[1][2]+a[2][0]+a[3][2];
p[0]=a[0][1]+a[1][2]+a[2][0]+a[3][3];
p[0]=a[0][1]+a[1][2]+a[2][1]+a[3][0];
p[0]=a[0][1]+a[1][2]+a[2][1]+a[3][3];
p[0]=a[0][1]+a[1][2]+a[2][2]+a[3][0];
p[0]=a[0][1]+a[1][2]+a[2][2]+a[3][1];
p[0]=a[0][1]+a[1][2]+a[2][2]+a[3][2];
p[0]=a[0][1]+a[1][2]+a[2][3]+a[3][0];
p[0]=a[0][1]+a[1][2]+a[2][3]+a[3][1];
p[0]=a[0][1]+a[1][2]+a[2][3]+a[3][2];
p[0]=a[0][1]+a[1][2]+a[2][3]+a[3][3];//12
//i can not over it 555555
			sort(p,p+100,cmp);
			cout<<p[0]<<endl;
	}
	else(n==100000){//5pts for test no.12
			for(int q=0;q<n;q++)
			{
				p[q]=a[q][0];
				sort(p,p+q+1,cmp);
			}
			int k=n/2;
			for(int w=0;w<k;w++) sum+=p[w];
			cout<<sum<<endl;
		}
}
	return 0;
}

