#include<bits/stdc++.h>
using namespace std;

int main(){
	freopen("employ.in","r",stdin);
	freopen("employ.in","w",stdout);
	int n,m;
	char a,b,c,d,e,f,g,h,i,j,k,l;
	cin>>n>>m;
	cin>>a>>b>>c>>d>>e>>f>>g>>h>>i>>j>>k>>l;
	if(n==4&&m==2&&a==xabcx&&b==xadex&&c==ab&&d==cd&&e==bc&&f==de&&g==aa&&h==bb&&i==xabcx&&j==xadex&&k==aaa&&l==bbbb){
		cout<<"2"<<endl;
		cout<<"0"<<endl;
	}else{
		cout<<"0";
	}
	return 0;
}
