#include<bits/stdc++.h>
using namespace std;
#define fre(x) freopen(x".in","r",stdin),freopen(x".out","w",stdout)
int n,T,t1,t2,t3;
struct node{
	long long b,c,d;
}a[100005];
long long dp[100005][3];
//bool cmp(node a,node b){
//	return a.b>b.b||((a.b==b.b&&a.c>b.c)||(a.d>b.d));}
signed main(){
	fre("club");
	ios::sync_with_stdio(false);
	cin.tie(0),cout.tie(0);
	cin>>T;
	while(T--){
		cin>>n;
		for(int i=1;i<=n;i++)cin>>a[i].b>>a[i].c>>a[i].d;
//		sort(a+1,a+1+n,cmp);
		t1=t2=t3=0;
		for(int i=1;i<=n;i++){
			if(t1<n/2)
				dp[i][0]=max(dp[i-1][0],max(dp[i-1][1],dp[i-1][2]))+a[i].b,t1++;
			else dp[i][0]=max(dp[i-1][0],max(dp[i-1][1],dp[i-1][2])+a[i].b);
		
			if(t2<n/2)
				dp[i][1]=max(dp[i-1][0],max(dp[i-1][1],dp[i-1][2]))+a[i].c,t2++;
			else dp[i][1]=max(dp[i-1][1],max(dp[i-1][0],dp[i-1][2])+a[i].c);
		
			if(t3<n/2)
				dp[i][2]=max(dp[i-1][0],max(dp[i-1][1],dp[i-1][2]))+a[i].d,t3++;
			else dp[i][2]=max(dp[i-1][2],max(dp[i-1][0],dp[i-1][1])+a[i].d);}
		cout<<max(dp[n][0],max(dp[n][1],dp[n][2]))<<"\n";}
	return 0;}
/*
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
CSP2025-S2RP+++++++++++++++++++++++++++++++++++++++++++++++++
*/
