#include<bits/stdc++.h>using namespace std;long long t,n,ans,a[205][5],c[205];bool f=0;void dfs(long long st,long long x,long long y,long long z,long long s){	if(x>n/2)return;	if(y>n/2)return;	if(z>n/2)return;	if(st==n+1){		ans=max(ans,s);		return;	}	dfs(st+1,x+1,y,z,s+a[st][1]); 	dfs(st+1,x,y+1,z,s+a[st][2]); 	dfs(st+1,x,y,z+1,s+a[st][3]); }void init(){	ans=0;	cin>>n;	for(int i=1;i<=n;++i)scanf("%lld%lld%lld",&a[i][1],&a[i][2],&a[i][3]);	}void p(){	f=0;	for(int i=1;i<=n;++i)f|=a[i][3];	f=!f;}void tp(){	for(int i=1;i<=n;++i)ans+=max(a[i][1],a[i][2]),c[i]=abs(a[i][1]-a[i][2]);	sort(c+1,c+1+n);	for(int i=1;i<=n/2;++i)ans-=c[i]; }void print(){	cout<<ans<<'\n';}void solve(){	init();	p();=	if(f)tp();	else dfs(1,0,0,0,0);	print();}int main(){	freopen("club.in","r",stdin);	freopen("club.out","w",stdout);	cin>>t;		while(t--)solve(); } 