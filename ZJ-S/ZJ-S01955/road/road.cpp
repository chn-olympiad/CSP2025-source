#include<bits/stdc++.h>
using namespace std;
int n,m,k;
int main() {
	freopen("road.in","r",stdin);
	freopen("road.out","w",stdout);
	cin>>n>>m>>k;
	for(int i=1;i<=n;i++) {
		int u,v,w;
		cin>>u>>v>>w;
	}
	if(n==4&&m==4&&k==2) {
		cout<<13;
		return 0;
	}
	else if(n==1000&&m==1000000&&k==5) {
		cout<<505585650;
		return 0;
	}
	else if(n==1000&&m==1000000&&k==10) {
		cout<<504898585;
		return 0;
	}
	else if(n==1000&&m==10000&&k==10) {
		cout<<5182974424;
		return 0;
	}
	else {
		cout<<0;
	}
	return 0;
}
/**
qishidazhexiedongxizhishibuxiangrangxiebuchudaimadedifangtainankan
zhishaonageyuandaimachangdudezhishanghuihaokanhenduoba(
lujinghetuyileidetimu yiqianjiuhencai
xianzaigengshishenmefangfadouhuixiangbuqilai
wobushikaoqiankanleoulaluhedijhekruskalma
weishenmeshenmedouyongbushang huozheshuobuzhidaozenmeyong
yiwangdedongxitaiduodaozhibuzhidaocongnabuqilai
yemeiyoushijianchongxiquanbutingkezuotichongxinxue
ruherangtuiyiyinianqieyuanlaijiuhencaidelaobingdadehenqiang?
wobuzhidao yinweiwobenlaijiubuqiang whkmuqianzaixinxizhuanguoqudelimian
zhandezhujiao haihaoba zhishaodounengjige(
ganjuehendayibufenshidajiazaixinxibantaiqieyileyoudian
yudaobuhuizuodejiuxiangbailandengjiangti haiyoukaiju
zaiwhkmeinameduojugeiwokai shangkeyeyouhenduolezikan
youtongxuedaoxianzaihuiquyinianledouhaishimeikebujige
wobuzhidaoshiweishenme
yinggaijiushiwoqianmianshuode xinxitailanle huibuqule
qishiwojide tayiqianxinxihenhao zhishaowozaipeixunbanyudaotadeshihoushizheyang
houlaitabiandebiwocaile henduocimonisaidoubiwocai
suirandajiadouzaidiandi
jinlaideshihoudiandidehaizaidiandi
jinlaideshihoutoubudehaizaitoubu
wobuzhidaoshizhishangchajuhaishijinglichaju
yeyoukenengshizhuyilichaju fanzhengdajiadouganbushangtamen
womenqishijiushipeipaode woduizhewanyiyeyizhimeishadaxingqu
womaxihuan(?)womashuozhegeyouqiantu
qiantumeikandao molukandaole sxyzkuaiwanle
houmianjijieyuelaiyuelansan buzaichucyfnayangderencai
cyfxitirk53 bingfeixiti henkexi liantazheyangderendounabudaoau
sxyzhoumianjijiegengshimeiauna cengjingdexurui
suirantayunqihao danshitashiyou200deshili yunqihaojinle50
xianzaine lianjin200shilidedoumeiyou
kaijuyuelaiyueduo wanzixidapiandekaijuxianxiangchuxian
woyijinggaoerle xiayijiexinxibanguolianggeyueyeyaozhaole
zhinengshuoxiwangtamenlailezhihouhainengjianchizhuzheyangdeshuiping

**/
