#include<bits/stdc++.h>
using namespace std;
struct node{
	int x,y,z;
}a[100008];
int t,n,b[100008],c[100008],d[100008],e[100008],f[100008],g[100008],h[100008],l[10];
int bb,cc,dd,ee,ff,gg,hh;
bool cmp(node u,node v)
{
	return u.x>v.x;
}
int main()
{
	freopen("club.in","r",stdin);
	freopen("club.out","w",stdout);
	ios::sync_with_stdio(false);
	cin.tie(0);
	cout.tie(0);
	cin>>t;
	while(t--)
	{
		cin>>n;
		l[1]=l[2]=l[3]=0;
		bb=cc=dd=ee=ff=gg=1;
		long long ans=0,cnt=0;
		int flag=0;
		for(int i=1;i<=n;i++)
		{
			cin>>a[i].x>>a[i].y>>a[i].z;
			cnt+=a[i].x+a[i].y+a[i].z;
			if(a[i].y>0||a[i].z>0)
			flag=1;
			long long k=0;
			h[i]=1;
			if(a[i].x>k)
			{
				k=a[i].x;
				h[i]=1;
			}
			if(a[i].y>k)
			{
				k=a[i].y;
				h[i]=2;
			}
			if(a[i].z>k)
			{
				k=a[i].z;
				h[i]=3;
			}
			if(h[i]==1)
			{
				if(a[i].x-a[i].y>a[i].x-a[i].z)
				{
				c[cc]=a[i].x-a[i].z;
				cc++;	
				}
				else
				{
				b[bb]=a[i].x-a[i].y;
				bb++;
				}
				ans+=a[i].y+a[i].z;
				l[2]++;
				l[3]++;
			}
			else
			if(h[i]==2)
			{
				if(a[i].y-a[i].x>a[i].y-a[i].z)
				{
				e[ee]=a[i].y-a[i].z;	
				ee++;
				}
				else
				{
				d[dd]=a[i].y-a[i].x;
				dd++;	
				}
				ans+=a[i].x+a[i].z;
				l[1]++;
				l[3]++;
			}
			else
			if(h[i]==3)
			{
				if(a[i].z-a[i].x>a[i].z-a[i].y)
				{
				g[gg]=a[i].z-a[i].y;
				gg++;	
				}
				else
				{
				f[ff]=a[i].z-a[i].x;
				ff++;	
				}
				ans+=a[i].y+a[i].x;
				l[2]++;
				l[1]++;
			}
		}
		if(flag==0)
		{
			sort(a+1,a+n+1,cmp);
			for(int i=1;i<=n/2;i++)
			{
				ans+=a[i].x;
			}
			cout<<ans<<"\n";
			return 0;
		}
		sort(b+1,b+bb-1+1);
		sort(c+1,c+cc-1+1);
		sort(d+1,d+dd-1+1);
		sort(e+1,e+ee-1+1);
		sort(f+1,f+ff-1+1);
		sort(g+1,g+gg-1+1);
		int tb=1,tc=1,td=1,te=1,tf=1,tg=1;
		while(l[1]<n/2)
		{
			if(bb==tb)
			{
				ans+=c[tc];
				tc++;
				l[1]++;
				continue;
			}
			if(cc==tc)
			{
				ans+=b[tb];
				tb++;
				l[1]++;
				continue;
			}
			if(b[tb]<c[tc])
			{
				ans+=b[tb];
				tb++;
				l[1]++;
			}
			else
			{
				ans+=c[tc];
				tc++;
				l[1]++;
			}
		}
		while(l[2]<n/2)
		{
			if(dd==td)
			{
				ans+=e[te];
				te++;
				l[2]++;
				continue;
			}
			if(ee==te)
			{
				ans+=d[td];
				td++;
				l[2]++;
				continue;
			}
			if(d[td]<e[te])
			{
				ans+=d[td];
				td++;
				l[2]++;
			}
			else
			{
				ans+=e[te];
				te++;
				l[2]++;
			}
		}
		while(l[3]<n/2)
		{
			if(ff==tf)
			{
				ans+=g[tg];
				tg++;
				l[3]++;
				continue;
			}
			if(gg==tg)
			{
				ans+=f[tf];
				tf++;
				l[3]++;
				continue;
			}
			if(f[tf]<g[tg])
			{
				ans+=f[tf];
				tf++;
				l[3]++;
			}
			else
			{
				ans+=g[tg];
				tg++;
				l[3]++;
			}
		}
		cout<<cnt-ans<<"\n";
	}
	return 0;
}
