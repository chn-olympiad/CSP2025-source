#include<bits/stdc++.h>
using namespace std;
int t,n,cnt[3],ans;
struct Node{
	int ap[3],dip,ma,sl;
}node[110000];
bool cmp(Node a,Node b){
	return a.dip>b.dip;
}
int main(){
	freopen("club.in","r",stdin);
	freopen("club.out","w",stdout);
	ios::sync_with_stdio(false);
	cin.tie(0);
	cout.tie(0);
	cin>>t;
	while(t--){
		cin>>n;
		for(int i=1;i<=n;i++){
			cin>>node[i].ap[0]>>node[i].ap[1]>>node[i].ap[2];
			if(node[i].ap[0]>=node[i].ap[1]){
				node[i].ma=0;
			}else{
				node[i].ma=1;
			}
			if(node[i].ap[node[i].ma]<=node[i].ap[2]){
				node[i].ma=2;
			}
			if(node[i].ap[(node[i].ma+1)%3]>=node[i].ap[(node[i].ma+2)%3]){
				node[i].sl=(node[i].ma+1)%3;
			}else{
				node[i].sl=(node[i].ma+2)%3;
			}
			node[i].dip=node[i].ap[node[i].ma]-node[i].ap[node[i].sl];
		}
		sort(node+1,node+n+1,cmp);
		ans=0;
		cnt[0]=cnt[1]=cnt[2]=0;
		for(int i=1;i<=n;i++){
			if(cnt[node[i].ma]<<1<n){
				cnt[node[i].ma]++;
				ans+=node[i].ap[node[i].ma];
			}else{
				cnt[node[i].sl]++;
				ans+=node[i].ap[node[i].sl];
			}
		}
		cout<<ans<<'\n';
	}
	return 0;
}
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
////////
/////////