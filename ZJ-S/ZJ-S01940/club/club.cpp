#include<bits/stdc++.h>
using namespace std;
int n;
int a[200005];
int b[200005];
int c[200005];
struct node{
	int x,maxx,id;
}q1[200005],q2[200005],q3[200005];
int cnt1,cnt2,cnt3;
long long ans;
int cmp(node a,node b){
	return (a.x-a.maxx)<(b.x-b.maxx);
}
int t;
int main(){
	freopen("club.in","r",stdin);
	freopen("club.out","w",stdout);
	ios::sync_with_stdio(false);
	cin.tie(0),cout.tie(0);
	cin>>t;
	while(t--){
		ans=0;
		cnt1=0,cnt2=0,cnt3=0;
		cin>>n;
		for(int i=1;i<=n;i++){
			cin>>a[i]>>b[i]>>c[i];
			int x1=a[i],x2=b[i],x3=c[i];
			if(x2>x1) swap(x2,x1);
			if(x3>x2) swap(x3,x2);
			if(x2>x1) swap(x2,x1);
			if(x1==x2){
				ans+=x1;
				continue;
			}
			if(a[i]==x1){
				cnt1++;
				q1[cnt1].x=x1;
				q1[cnt1].maxx=max(x2,x3);
				q1[cnt1].id=i;
			}
			if(b[i]==x1){
				cnt2++;
				q2[cnt2].x=x1;
				q2[cnt2].maxx=max(x2,x3);
				q2[cnt2].id=i;
			}
			if(c[i]==x1){
				cnt3++;
				q3[cnt3].x=x1;
				q3[cnt3].maxx=max(x2,x3);
				q3[cnt3].id=i;
			}
		}
		if(cnt1<=n/2&&cnt2<=n/2&&cnt3<=n/2){
			for(int i=1;i<=cnt1;i++){
				ans+=q1[i].x;
			}
			for(int i=1;i<=cnt2;i++){
				ans+=q2[i].x;
			}
			for(int i=1;i<=cnt3;i++){
				ans+=q3[i].x;
			}
			cout<<ans<<'\n';
			continue;
		}
		else{
//			cout<<'\n'<<cnt1<<" "<<cnt2<<" "<<cnt3<<'\n';
			if(cnt1>n/2){
				sort(q1+1,q1+cnt1+1,cmp);
				for(int i=1;i<=cnt1-n/2;i++){
					ans+=q1[i].maxx;
//					cout<<q1[i].maxx<<" "<<q1[i].x<<" "<<a[q1[i].id]<<" "<<b[q1[i].id]<<" "<<c[q1[i].id]<<'\n';
				}
				for(int i=cnt1-n/2+1;i<=cnt1;i++){
					ans+=q1[i].x;
				}
				for(int i=1;i<=cnt3;i++){
					ans+=q3[i].x;
				}
				for(int i=1;i<=cnt2;i++){
					ans+=q2[i].x;
				}
			}
			if(cnt2>n/2){
				sort(q2+1,q2+cnt2+1,cmp);
				for(int i=1;i<=cnt2-n/2;i++){
					ans+=q2[i].maxx;
				}
				for(int i=cnt2-n/2+1;i<=cnt2;i++){
					ans+=q2[i].x;
				}
				for(int i=1;i<=cnt1;i++){
					ans+=q1[i].x;
				}
				for(int i=1;i<=cnt3;i++){
					ans+=q3[i].x;
				}
			}
			if(cnt3>n/2){
				sort(q3+1,q3+cnt3+1,cmp);
				for(int i=1;i<=cnt3-n/2;i++){
					ans+=q3[i].maxx;
				}
				for(int i=cnt3-n/2+1;i<=cnt3;i++){
					ans+=q3[i].x;
				}
				for(int i=1;i<=cnt1;i++){
					ans+=q1[i].x;
				}
				for(int i=1;i<=cnt2;i++){
					ans+=q2[i].x;
				}
			}
			cout<<ans<<'\n';
		}
	}
	return 0;
}
/*
1
200
18392 7795 0
11082 10714 0
2665 172 0
15076 9750 0
16617 15582 0
16586 3993 0
18633 18628 0
17530 7810 0
13968 12100 0
12233 11298 0
16041 9282 0
15640 5779 0
18968 2225 0
17186 6222 0
11944 11686 0
19100 14611 0
13378 12433 0
10747 1329 0
4260 604 0
12715 12441 0
15597 4958 0
15242 2130 0
18434 8590 0
14609 6330 0
10618 6900 0
17236 11139 0
11676 10548 0
13051 12924 0
14289 14884 0
14215 9362 0
16220 12061 0
19734 13784 0
17200 15212 0
10361 5294 0
19717 7337 0
1799 7667 0
12381 5417 0
9071 1758 0
18725 14865 0
14442 8825 0
13994 8332 0
12741 15606 0
19240 9319 0
12113 2385 0
9839 9038 0
12701 8724 0
17868 7413 0
19857 11800 0
15113 14295 0
15342 11918 0
17231 14242 0
17442 6652 0
18704 15688 0
18148 17608 0
14225 10838 0
16768 8904 0
18733 11854 0
9826 7995 0
19408 18158 0
17408 9631 0
16174 11031 0
15391 6118 0
14217 6242 0
11917 10688 0
2148 15146 0
18490 15835 0
18475 11564 0
10132 3760 0
13672 8898 0
16230 7827 0
18017 8550 0
8569 1286 0
19024 16117 0
11493 639 0
14292 9566 0
17659 9647 0
11813 4704 0
10490 9623 0
17375 12842 0
19348 18033 0
15313 9744 0
2274 673 0
17631 8295 0
13234 11233 0
11153 5273 0
51 10116 0
7352 3622 0
1644 9355 0
12285 7297 0
18412 9383 0
13485 11327 0
15989 10028 0
19197 3363 0
12440 7436 0
8507 291 0
10669 2463 0
16746 15095 0
19305 8042 0
17807 17522 0
10965 5616 0
9650 866 0
13668 11262 0
17655 16473 0
12210 10978 0
17817 5443 0
10178 16744 0
10994 7075 0
10935 19695 0
18525 12679 0
13010 2993 0
18460 18192 0
5579 4297 0
19620 1863 0
18205 9189 0
11467 13094 0
17536 5892 0
9801 4081 0
12702 4404 0
18948 15665 0
18873 14661 0
15164 12266 0
19197 13945 0
11800 1969 0
17603 14434 0
12329 7363 0
14294 3299 0
5564 5992 0
8006 4931 0
18165 13863 0
19982 10193 0
18385 16135 0
18450 5618 0
16954 5888 0
3268 2307 0
13210 10019 0
17499 17244 0
18420 7697 0
13058 2775 0
13719 6831 0
17322 15266 0
2863 15865 0
9052 4288 0
12886 7616 0
6150 5349 0
19552 15660 0
16986 10053 0
14033 9524 0
14213 4097 0
18173 3589 0
16016 13536 0
19341 9486 0
10921 7896 0
14684 13538 0
2296 13456 0
12239 3745 0
15778 12536 0
12812 11982 0
13022 3958 0
12454 11041 0
16038 7466 0
9815 3945 0
9121 3197 0
19115 5854 0
19010 17797 0
11770 8152 0
15243 5842 0
15906 10104 0
6802 9531 0
12696 5089 0
16361 4400 0
12730 9943 0
16000 6434 0
13876 10430 0
12260 8992 0
6812 6812 0
13631 5989 0
16890 11824 0
19969 2040 0
16651 11858 0
19616 10098 0
19566 16466 0
16298 6450 0
14289 11728 0
12066 10463 0
13026 1679 0
18013 7294 0
15398 11509 0
2090 6417 0
19064 11332 0
13542 10239 0
15145 4177 0
2291 1263 0
18060 17825 0
19036 11160 0
19125 15818 0
15477 1217 0
15434 11881 0
8306 3084 0
17198 12635 0
18172 10113 0
*/
