#include <bits/stdc++.h>
#define pii pair<int, int>
using namespace std;
int n, a[100005][3], T, sum[5], s[100005];
int ans;
inline int read()
{
	int x = 0, f = 1;
	char ch = getchar();
	while(ch < '0' || ch > '9')
	{
		if(ch == '-')
		{
			f = 1; 
		}
		ch = getchar();
	}
	while(ch >= '0' && ch <= '9')
	{
		x = x * 10 + (ch - '0');
		ch = getchar();
	}
	return x * f;
}
int main()
{
	//freopen("club3.in", "r", stdin);
	//freopen("club.out", "w", stdout);
    T = read();
	while(T--)
	{
		ans = 0;
		priority_queue <pii, vector<pii>, greater<pii> > res[4];
		memset(s, 0, sizeof(s));
		memset(sum, 0, sizeof(sum));
		n = read();
		for(int i = 1;i <= n;i++)
		{
			a[i][1] = read(), a[i][2] = read(), a[i][3] = read();
		}
		for(int i = 1;i <= n;i++)
		{
			int fir, sec, thi;
			if(a[i][1] > a[i][2] && a[i][1] > a[i][3])
			{
				fir = 1;
				if(a[i][2] > a[i][3])
				{
					sec = 2, thi = 3;
				} 
				else
				{
					sec = 3, thi = 2;
				}
			}
			else if(a[i][2] > a[i][3])
			{
				fir = 2;
				if(a[i][1] > a[i][3])
				{
					sec = 1, thi = 3;
				}
				else
				{
					sec = 3, thi = 1;
				}
			}
			else
			{
				fir = 3;
				if(a[i][1] > a[i][2])
				{
					sec = 1, thi = 2;
				}
				else
				{
					sec = 2, thi = 1;
				}
			}
			sum[fir]++;
			//cout << sum[fir] << endl;
			if(sum[fir] > n / 2)
			{
				sum[fir]--;
				int sa = res[fir].top().first, nid = res[fir].top().second;
				int ss = a[i][fir] - a[i][sec];
				int nsec = sec, nthi = thi;
				if(a[nid][nsec] < a[nid][nthi])
				{
					swap(nsec, nthi);
				}
				if(ss > sa)
				{
					ans = ans + a[i][fir] - sa;
					res[fir].pop();
					res[fir].push({ss, i});
					res[nsec].push({-sa, nid});
					sum[nsec]++;
					s[nid] = nsec;
					s[i] = fir;
				}
				else
				{
					sum[sec]++;
					ans = ans + a[i][sec];
					res[sec].push({-ss, i});
					s[i] = sec;
				}
			}
			else
			{
				res[fir].push({a[i][fir] - a[i][sec], i});
				ans = ans + a[i][fir]; 
				s[i] = fir;
			}
		}
//		for(int i = 1;i <= n;i++)
//		{
//			cout << s[i] << ' ';
//		}
//		cout << endl;
		cout << ans << endl;
	}
	return 0;
} 

/*5
30
6090 4971 4101
14495 19657 10011
6294 14948 17496
3266 18897 6963
3129 14412 12639
5331 7102 7590
12533 15635 16270
2339 16892 11211
6980 3113 19980
16859 13322 9404
16742 1573 8946
1285 5253 2697
18072 16412 5595
15870 17311 7711
19194 4644 11192
1306 6558 10317
11128 16814 5947
1603 6202 15251
4014 5797 2498
1557 4235 12431
1561 16149 16433
9399 1760 809
13383 18379 10169
7679 4131 17310
2900 8148 13627
14783 19510 17642
19717 4666 6335
9868 5451 19561
11196 1774 11436
10753 10148 6994
30
10424 1888 2199
17649 15804 14198
10138 18538 13467
6761 3083 2293
15041 10863 4222
14340 5758 4300
19996 18929 18297
10926 3304 2176
7141 10829 10956
13607 4376 14108
16686 9725 6258
4434 18794 4926
11129 10938 790
8722 4648 9466
8433 9585 14771
14115 7600 2137
13059 4853 4038
16361 10577 6964
11071 2792 4531
19225 16563 12240
4933 7500 11108
13470 7273 3969
19927 15477 7010
13889 8913 284
16346 8745 3469
4832 9878 2776
11723 6399 3415
13453 19859 13711
10335 7892 6192
19584 11583 14062
30
9478 19118 8151
13734 12377 2590
17271 16865 12064
18865 15914 6583
17881 2606 1461
7661 10745 2015
5626 1 13811
17093 17920 9103
1260 5941 6956
7029 8181 9418
16277 13988 354
14474 15227 4982
18507 16641 9235
16900 4898 4480
1289 3301 13793
19466 18556 6597
8834 261 19131
19944 18987 9560
14166 7854 1087
16689 3937 4380
18836 4342 18874
1751 16536 17990
10936 3627 1271
12006 16719 4693
12954 6746 5867
17098 16955 4125
18143 8067 2266
14889 8692 60
14736 14274 10644
16270 7210 3708
30
7348 703 14149
11524 8584 12424
17146 10238 6221
11343 4548 12436
6734 16641 13734
9412 2951 16747
10457 5645 11050
8832 8638 15352
4359 3830 8631
6854 1555 17206
12210 4057 15760
2094 1772 3950
11792 4634 16269
12742 18687 2815
7616 1139 19916
11595 10431 12257
9859 2477 16696
15314 3789 19173
3331 351 18764
18198 13027 19770
11562 2215 13762
10233 490 18645
8216 497 17311
12545 5185 19009
14061 2936 18146
6223 3907 18331
18932 9546 2865
11326 7358 16023
1596 1197 4624
14531 8412 19487
30
17553 12797 3374
2953 14912 58
7555 19831 2560
5097 13433 15072
1781 17711 18010
8299 18720 12018
14603 344 18111
998 14772 18326
19578 4037 3766
784 7896 12726
7146 7825 11703
10835 4567 12794
12486 11687 7166
14061 2677 17076
10303 9423 9254
10436 16190 10040
3017 5162 17384
2755 3755 17527
2078 4142 8428
18229 16100 2303
14554 6802 8514
6194 6065 17215
2753 17977 14174
3266 2088 17979
13615 17270 14852
11595 1443 5715
8506 1380 14666
3136 12361 19505
1387 19696 3983
18971 8142 9662


*/

