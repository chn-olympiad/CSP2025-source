#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
priority_queue<ll,vector<ll>,greater<ll> >q1,q2,q3;
int main()
{
	freopen("club.in","r",stdin);
	freopen("club.out","w",stdout);
	int t,n;
	ll x1,x2,x3;
	ll ans;
	cin>>t;
	while(t--)
	{
		ans=0;
		cin>>n;
		while(!q1.empty())
			q1.pop();
		while(!q2.empty())
			q2.pop();
		while(!q3.empty())
			q3.pop();
		for(int i=1;i<=n;i++)
		{
			cin>>x1>>x2>>x3;
			if(x1>=x2&&x1>=x3)
			{
				ans+=x1;
				if(x2>x3)
				{
					if(q1.size()==n/2)
					{
						if(q1.top()<x1-x2)
						{
							ans-=q1.top();
							q1.pop();
							q1.push(x1-x2);
						}
						else
						{
							ans-=x1;
							ans+=x2;
						}
					}
					else
						q1.push(x1-x2);
				}
				else
				{
					if(q1.size()==n/2)
					{
						if(q1.top()<x1-x3)
						{
							ans-=q1.top();
							q1.pop();
							q1.push(x1-x3);
						}
						else
						{
							ans-=x1;
							ans+=x3;
						}
					}
					else
						q1.push(x1-x3);
				}
			}
			else if(x2>=x1&&x2>=x3)
			{
				ans+=x2;
				if(x1>x3)
				{
					if(q2.size()==n/2)
					{
						if(q2.top()<x2-x1)
						{
							ans-=q2.top();
							q2.pop();
							q2.push(x2-x1);
						}
						else
						{
							ans-=x2;
							ans+=x1;
						}
					}
					else
						q2.push(x2-x1);
				}
				else
				{
					if(q2.size()==n/2)
					{
						if(q2.top()<x2-x3)
						{
							ans-=q2.top();
							q2.pop();
							q2.push(x2-x3);
						}
						else
						{
							ans-=x2;
							ans+=x3;
						}
					}
					else
						q2.push(x2-x3);
				}
			}
			else
			{
				ans+=x3;
				if(x1>x2)
				{
					if(q3.size()==n/2)
					{
						if(q3.top()<x3-x1)
						{
							ans-=q3.top();
							q3.pop();
							q3.push(x3-x1);
						}
						else
						{
							ans-=x3;
							ans+=x1;
						}
					}
					else
						q3.push(x3-x1);
				}
				else
				{
					if(q3.size()==n/2)
					{
						if(q3.top()<x3-x2)
						{
							ans-=q3.top();
							q3.pop();
							q3.push(x3-x2);
						}
						else
						{
							ans-=x3;
							ans+=x2;
						}
					}
					else
						q3.push(x3-x2);
				}
			}
		}
		cout<<ans<<'\n';
	}
	return 0;
}