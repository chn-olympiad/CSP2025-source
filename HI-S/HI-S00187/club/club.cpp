#include<bits/stdc++.h>
using namespace std;
long long n,t;
int a[10005][10005],b[10005];
int main()
{
	freopen("club.in","r",stdin);
	freopen("club.out","w",stdout);
	cin>>t;
	for(int tk=0;tk<=t;tk++)
	{
		int Max1=0;
		cin>>n;
		for(int i=1;i<=n;i++)
	    {
		    for(int j=1;j<=3;j++)
		    {
			    cin>>a[i][j];
		    }
	    }
		if(n==2)
		{
			
	        b[1]=a[1][1]+a[2][2];
	        b[2]=a[1][1]+a[2][3];
	        b[3]=a[1][2]+a[2][1];
	        b[4]=a[1][2]+a[2][3];
	        b[5]=a[1][3]+a[2][1];
	        b[6]=a[1][3]+a[2][2];
			for(int i=1;i<=6;i++)
	        {
		        Max1=max(b[i],Max1);
	        }
	        cout<<Max1<<endl;
		}
		if(n==4)
		{
			b[1]=a[1][1]+a[2][1]+a[3][2]+a[4][2];
			b[2]=a[1][1]+a[2][1]+a[3][2]+a[4][3];
			b[3]=a[1][1]+a[2][1]+a[3][3]+a[4][2];
			b[4]=a[1][1]+a[2][1]+a[3][3]+a[4][3];
			b[5]=a[1][1]+a[2][2]+a[3][1]+a[4][2];
			b[6]=a[1][1]+a[2][2]+a[3][1]+a[4][3];
			b[7]=a[1][1]+a[2][2]+a[3][2]+a[4][1];
			b[8]=a[1][1]+a[2][2]+a[3][2]+a[4][3];
			b[9]=a[1][1]+a[2][2]+a[3][3]+a[4][1];
			b[10]=a[1][1]+a[2][2]+a[3][3]+a[4][2];
			b[11]=a[1][1]+a[2][2]+a[3][3]+a[4][3];
			b[12]=a[1][1]+a[2][3]+a[3][1]+a[4][2];
			b[13]=a[1][1]+a[2][3]+a[3][1]+a[4][3];
			b[14]=a[1][1]+a[2][3]+a[3][2]+a[4][2];
			b[15]=a[1][1]+a[2][3]+a[3][2]+a[4][3];
			b[16]=a[1][1]+a[2][3]+a[3][3]+a[4][1];
			b[17]=a[1][1]+a[2][3]+a[3][3]+a[4][2];
			b[18]=a[1][1]+a[2][3]+a[3][3]+a[4][3];
			b[19]=a[1][2]+a[2][1]+a[3][1]+a[4][2];
			b[20]=a[1][2]+a[2][1]+a[3][1]+a[4][3];
			b[21]=a[1][2]+a[2][1]+a[3][2]+a[4][1];
			b[22]=a[1][2]+a[2][1]+a[3][2]+a[4][3];
			b[23]=a[1][2]+a[2][1]+a[3][3]+a[4][1];
			b[24]=a[1][2]+a[2][1]+a[3][3]+a[4][2];
			b[25]=a[1][2]+a[2][1]+a[3][3]+a[4][3];
			b[26]=a[1][2]+a[2][2]+a[3][1]+a[4][1];
			b[27]=a[1][2]+a[2][2]+a[3][1]+a[4][3];
			b[28]=a[1][2]+a[2][2]+a[3][3]+a[4][1];
			b[29]=a[1][2]+a[2][2]+a[3][3]+a[4][3];
			b[30]=a[1][2]+a[2][3]+a[3][1]+a[4][1];
			b[31]=a[1][2]+a[2][3]+a[3][1]+a[4][2];
			b[32]=a[1][2]+a[2][3]+a[3][1]+a[4][3];
			b[33]=a[1][2]+a[2][3]+a[3][2]+a[4][1];
			b[34]=a[1][2]+a[2][3]+a[3][2]+a[4][3];
			b[35]=a[1][2]+a[2][3]+a[3][3]+a[4][1];
			b[36]=a[1][2]+a[2][3]+a[3][3]+a[4][2];
			b[37]=a[1][3]+a[2][1]+a[3][1]+a[4][2];
			b[38]=a[1][3]+a[2][1]+a[3][1]+a[4][3];
			b[39]=a[1][3]+a[2][1]+a[3][2]+a[4][1];
			b[40]=a[1][3]+a[2][1]+a[3][2]+a[4][2];
			b[41]=a[1][3]+a[2][1]+a[3][2]+a[4][3];
			b[42]=a[1][3]+a[2][1]+a[3][3]+a[4][1];
			b[43]=a[1][3]+a[2][1]+a[3][3]+a[4][2];
			b[44]=a[1][3]+a[2][2]+a[3][1]+a[4][1];
			b[45]=a[1][3]+a[2][2]+a[3][1]+a[4][2];
			b[46]=a[1][3]+a[2][2]+a[3][1]+a[4][3];
			b[47]=a[1][3]+a[2][2]+a[3][2]+a[4][1];
			b[48]=a[1][3]+a[2][2]+a[3][2]+a[4][3];
			b[49]=a[1][3]+a[2][2]+a[3][3]+a[4][1];
			b[50]=a[1][3]+a[2][2]+a[3][1]+a[4][2];
	        b[51]=a[1][3]+a[2][3]+a[3][1]+a[4][1];
	        b[52]=a[1][3]+a[2][3]+a[3][1]+a[4][2];
	        b[53]=a[1][3]+a[2][3]+a[3][2]+a[4][1];
	        b[54]=a[1][3]+a[2][3]+a[3][2]+a[4][2];//18lovexx
			for(int i=1;i<=55;i++)
	        {
		        Max1=max(b[i],Max1);
	        }
	        cout<<Max1<<endl;
		}
	    
	}
	return 0;
}


